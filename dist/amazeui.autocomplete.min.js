$.fn.autocomplete=function(t){function e(t,e){var n,i=!1,s=t.optStyle,a=t.style;return n=new RegExp("^"+a+"$","ig"),$.each(s,function(){if(n.test(this))return i=!0,!1}),i?a:e.style}function n(t,e,n){var l,c="",o=t.val(),r=n.pattern;e.html("").hide(),r.test(o)&&(o=o.replace(r,"\\"+RegExp.$1)),""!=o&&(c=i(o,n),""!=c&&e.html(c).show(),l=e.find("li"),l.on("mouseenter",function(){s($(this),l,n)}),l.on("click",function(){a(t,$(this),n)}))}function i(t,e){var n=(new RegExp(t,"ig"),e.dictionary),i="";return $.each(n,function(){new RegExp(t,"ig").test(this)&&(i+=["<li>",this,"</li>"].join(""))}),i}function s(t,e,n){var i=n.active;e.each(function(){if($(this).hasClass(i))return $(this).removeClass(i),!1}),t.addClass(i)}function a(t,e,n){var i=e.html(),s=n.htmlEscape;$.each(s,function(t){i=i.replace(new RegExp(t,"igm"),this)}),t.val(i),e.parent().hide()}function l(t,e,n){var i=t.find("li"),s=n.active;switch(e){case 38:c(i,s,"last");break;case 40:c(i,s,"first");break;case 13:i.each(function(t){a(u,$(this),n)})}}function c(t,e,n){var i,s,a=!0;"last"==n?(i="prev",s=0):(i="next",s=t.length-1),t.each(function(l){if($(this).hasClass(e))return a=!1,$(this).removeClass(e),l==s?t[n]().addClass(e):$(this)[i]().addClass(e),!1}),a&&t[n]().addClass(e)}if("object"!=typeof t||!t.dictionary)return!1;var o,r,u=$(this),h=$(document),p={style:"gray",multiple:10,keySwitch:!0,mouseoverupSwitch:!0},f={wrapCls:"text-search-box",inputCls:"text-input",ulCls:"text-list",liCls:"text-list-li-active",htmlEscape:{"&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" "},optStyle:["gray","green","blue","black"],pattern:/(\( |\)|\*|\+|\[|\]|\?|\\|\^|\{|\|)/gm};t=$.extend({},p,t,f),o=e(t,p),u.addClass(t.inputCls),u.wrap(['<div class="',t.wrapCls,'"></div>'].join("")),u.parent().append(['<ul class="',t.ulCls,'"></ul>'].join("")),t.active=t.liCls+"-"+o,r=u.parent().find("ul").eq(0),u.addClass(t.inputCls+"-"+o),r.addClass(t.ulCls+"-"+o),u.on("input propertychange",function(){n($(this),r,t)}),t.keySwitch&&h.on("keydown",function(e){l(r,e.keyCode,t)}),t.mouseoverupSwitch&&(u.parent().on("mouseleave",function(){r.hide()}),u.parent().on("mouseenter",function(){n(u,r,t)}))};